---
layout: post
title: Windows 10 （GPT分区）系统平移到新的硬盘
categories: [cm, windows]
tags: [bcdboot, windows, gpt, efi, esp]
---

* 参考： 
  * [windows删除多余启动引导项](https://jingyan.baidu.com/article/03b2f78c0305d85ea237ae20.html)
  * [win10下删除多余UEFI启动项的方法](https://blog.csdn.net/chuaifang7248/article/details/100871291)
  * []()
  * []()
  * []()


## Windows 10 （GPT分区）系统平移到新的硬盘


1. 使用WePE工具箱启动进WinPE系统
1. 启动 DiskGenius ，从源盘克隆到新的硬盘（新硬盘容量要大于等于源盘）
    * 这里使用的是 DiskGenius 4.3.0 x64 系统，明显版本有些老，都不能识别exfat
    * 可以在 <http://www.diskgenius.cn> 下载新的免费版，拷贝到U盘，可以双击执行
    
    1. 菜单 工具 》克隆硬盘 》选择源盘 》选择目标盘
    1. 选择“复制所有扇区”
    1. 点击“开始”，500G大概等半个小时
1. 到这里，就克隆好了
1. 关机，拔掉u盘、源盘，启动

* **注意**
  * 目前源盘 和 目标盘 GUID一样，上面分区GUID也一样，同时插在电脑是无法启动的。
  * 如果想 源盘 和 目标盘 ，2个Windows10共存，继续往下看
1. 启动DiskGenius，修改硬盘GUID（这步不确定是否一定需要）
    1. 选中目标盘 》菜单“硬盘” 》修改MBR签名及磁盘GUID
    1. 点击“生成” 》确定
1. DiskGenius 中修改各个分区的GUID
    1. 选中 ESP 分区，菜单“分区” 》更改分区参数
    1. 在对话框“更改分区参数” 的GUID 输入框旁边，点击“生成”按钮
    1. 点击“确定”
    1. 依次，对所有分区进行上述操作
    1. 保存更改
1. 修复UEFI
    1. 在WinPE的系统菜单中，启动 `UEFI引导修复`
    1. 点击 `尝试挂载` ESF分区
    1. 到 DiskGenius 中可以看到：
        * ESP分区挂载后的盘符，例如是 `F:`
        * Windows10系统分区的盘符，例如是 `D:`
    1. 在`UEFI引导修复`中，点击按钮“命令提示符”
    1. 在弹出的命令行中执行 `bcdboot D:\Windows /s F: /l zh-cn`
1. 关机，拔掉u盘，启动

* **注意** 启动时，可能会出现windows boot menu，出现不止一个 windows启动项，按照如下步骤清除

1. 进入windows
1. 执行 `msconfig` 》“引导”选项卡
1. 删除除了当前系统，其他启动项
1. 重启







































































































