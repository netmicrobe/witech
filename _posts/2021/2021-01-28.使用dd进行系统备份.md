---
layout: post
title: 使用dd进行系统备份
categories: [cm, linux]
tags: [dd, 7za, bzip, bunzip]
---

* 参考： 
  * []()
  * []()



## 7zip + dd

~~~
# 备份分区到镜像文件，并用 7za 压缩
dd if=/dev/sda1 bs=1048576 conv=sync,noerror status=progress | 7za a -si -t7z -mx=1 -m0=LZMA2 -mmt=8  /path/to/backup.img.7z

# 从镜像文件恢复
7za x /path/to/backup.img.7z -so | dd of=/dev/sda1 status=progress
~~~


## bzip2 + dd

~~~
# backup
dd if=/dev/nvme0n1p8 bs=1M conv=sync,noerror status=progress | bzip2 -9f > /Volumes/silo/_backups/os.dd/manjaro.img.bz2

# restore
bunzip2 -dc /path/to/backup.img.bz2 | dd of=/dev/sda1 status=progress
~~~


## xz + dd

~~~
# backup
dd if=/dev/disk2s1 bs=1048576 count=30271 conv=sync,noerror | pv -s 30271m |  xz -z -3ve --threads=0 > /Volumes/Lexar/t5w10_1803.img_30271m.xz

# restore
xz -dc --threads=0 /Volumes/Lexar/t5w10_1803.img.xz | pv | dd of=/dev/disk2s1
~~~




## gzip + dd

~~~
# 备份分区到镜像文件，并用 gzip 压缩
dd if=/dev/sdb1 bs=64M conv=sync,noerror status=progress | gzip -c > /path/to/backup.img.gz

# 从镜像文件恢复
gunzip -c /path/to/backup.img.gz | sudo dd of=/dev/sdb1 status=progress
~~~



